<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/css/graphics/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/css/graphics/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/css/graphics/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>Field Notes - Where's Religion</title>
    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="/css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/materialize.js"></script>
    <script src="/js/init.js" defer></script>
    <script src="/js/fieldnotes.js"></script>
    <script>
    $(document).ready(function() {
        $('quick-actions')[0].addAction('Entry', 'snippet_folder', '/entry.html')
        $('quick-actions')[0].addAction('Capture Media', 'add_a_photo', '/media.html')
        $('quick-actions')[0].addAction('Map', 'pin_drop', '/map.html')
        var fab = document.querySelectorAll('.fixed-action-btn')
        var instances = M.FloatingActionButton.init(fab, {
            hoverEnabled: false
        })
    })
    </script>
    <style>
    .action {
        margin: 0px 2em;
    }

    textarea {
        height: 14em;
        padding: 1em;
    }

    .ab1 {
        bottom: 65px;
        right: 110px;
    }

    .ab2 {
        bottom: 65px;
    }

    .ab1 i {
        line-height: 66px !important;
    }

    .ab2 i {
        line-height: 66px !important;
    }

    .iconText {
        position: absolute;
        display: block;
        color: white;
        z-index: 2;
        padding-left: 17px;
        line-height: 31px;
    }
    .fixed-action-btn{
        z-index: 1000;
    }
    #addedNotes li i{
        position: absolute;
        right: 0;
/*        top: 6px;*/
    }
    </style>
</head>

<body>
    <site-nav></site-nav>
    <div onmousedown="submitNote_local(event)" id="keepNote" class="ab1 fixed-action-btn hide-on-med-and-up dropdown-trigger scale-transition scale-out">
        <small class="iconText">keep</small>
        <a class="btn-floating btn-large light-blue">
            <i class="material-icons">data_saver_on</i>
        </a>
    </div>
    <div onmousedown="cancelNote(event)" id="clearNote" class="ab2 fixed-action-btn hide-on-med-and-up dropdown-trigger scale-transition scale-out">
        <small class="iconText">clear</small>
        <a class="btn-floating btn-large red ">
            <i class="material-icons">backspace</i>
        </a>
    </div>
    <div class="container">
        <div class="row">
            <div class="col center" style="width: 100%;">
            </div>
        </div>
    </div>
    <div class="section">
        <div class="container">
            <div class="row">
                <div class="col center" style="width: 100%;">
                    <h4>Field Notes</h4>
                    <textarea onfocusin="showActionButtons(event)" onfocusout="hideActionButtons(event)" placeholder="Send yourself a scratch note..." id="notes" ></textarea>
                </div>
            </div>
            <div class="row hide-on-small-and-down">
                <div class="col center" style="width: 100%;">
                    <div class="center notestatus"></div>
                    <div onmousedown="submitNote_local(event)" class="action dropdown-trigger" style="display: inline-block;">
                        <span title="Upload this note to self for review later at a computer" class="light">Store Note</span><br>
                        <i title="Tap here to keep this note-to-self" class="material-icons medium light-blue-text">data_saver_on</i>
                    </div>
                    <div onmousedown="cancelNote(event)" class="action dropdown-trigger" style="display: inline-block;">
                        <span title="Forget this note, it is no good." class="light">Cancel Note</span><br>
                        <i title="Tap here to start over" class="material-icons medium light-blue-text">backspace</i>
                    </div>
                </div>
            </div>
            <div class="row">
                <h5 class="center"> Your Notes </h5>
                <ul id="addedNotes" class="collection with-header">
                </ul>
            </div>
        </div>
    </div>
    <site-footer></site-footer>
</body>
<script>
    /**
    * Catch user detection and trigger draw() for interfaces.
    */
    addEventListener('wrUserKnown', event => {
        getNotesInQueue_local()
    }, false) 

    function showActionButtons(){
        document.querySelectorAll(".fixed-action-btn").forEach(b => {
            b.classList.remove("scale-out")
        })
    }

    function hideActionButtons(){
        document.querySelectorAll(".fixed-action-btn").forEach(b => {
            b.classList.add("scale-out")
        })
    }

</script>
</html>